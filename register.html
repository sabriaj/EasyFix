<!DOCTYPE html>
<html lang="sq" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EasyFix - Regjistro Firmën dhe Abono</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

  <header class="bg-blue-700 text-white py-6 shadow-md">
    <div class="container mx-auto px-4 flex justify-between items-center">
      <h1 class="text-3xl font-extrabold tracking-tight">EasyFix</h1>
    </div>
  </header>

  <main class="container mx-auto px-4 py-10 flex-grow max-w-lg">
    
    <!-- Form Regjistrimi -->
    <section id="registerSection" class="bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-2xl font-bold mb-6 text-center text-blue-900">Regjistro Firmën Tënde</h2>
      <form id="firmForm" class="space-y-4">
        <input type="text" name="emri" placeholder="Emri i firmës" required class="w-full p-3 border rounded" />
        <input type="text" name="adresa" placeholder="Adresa / Qyteti" required class="w-full p-3 border rounded" />
        <input type="tel" name="telefoni" placeholder="Numër telefoni" required class="w-full p-3 border rounded" />
        <input type="email" name="email" placeholder="Email" required class="w-full p-3 border rounded" />
        <input type="text" name="kategoria" placeholder="Kategoria (p.sh. Elektricist)" required class="w-full p-3 border rounded" />
        <button type="submit" class="w-full bg-blue-700 text-white py-3 rounded hover:bg-blue-800 transition">Regjistrohu</button>
      </form>
      <p id="registerStatus" class="mt-4 text-center font-semibold"></p>
    </section>

    <!-- Seksioni i Abonimit (fshehur fillimisht) -->
    <section id="subscriptionSection" class="hidden bg-white rounded-xl shadow-lg p-8 mt-6">
      <h2 class="text-2xl font-bold mb-6 text-center text-blue-900">Zgjidh Planin e Abonimit</h2>
      <div class="flex flex-col space-y-4">
        <button class="planBtn bg-green-600 text-white py-3 rounded hover:bg-green-700 transition" data-plan="monthly" data-price="20">
          Plan Mujor - $20 (Muaji i Parë Falas)
        </button>
        <button class="planBtn bg-purple-600 text-white py-3 rounded hover:bg-purple-700 transition" data-plan="yearly" data-price="200">
          Plan Vjetor - $200
        </button>
      </div>
      <p id="subscriptionStatus" class="mt-4 text-center font-semibold"></p>
    </section>

  </main>

  <footer class="bg-blue-700 text-white text-center py-6 mt-auto">
    &copy; 2025 EasyFix.mk - Ndihma për çdo shtëpi
  </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const firmForm = document.getElementById('firmForm');
  const registerSection = document.getElementById('registerSection');
  const subscriptionSection = document.getElementById('subscriptionSection');
  const registerStatus = document.getElementById('registerStatus');
  const subscriptionStatus = document.getElementById('subscriptionStatus');

  firmForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    registerStatus.textContent = "Duke regjistruar firmën...";

    const data = {
      emri: firmForm.emri.value.trim(),
      adresa: firmForm.adresa.value.trim(),
      telefoni: firmForm.telefoni.value.trim(),
      email: firmForm.email.value.trim(),
      kategoria: firmForm.kategoria.value.trim()
    };

    try {
      const response = await fetch('https://script.google.com/macros/s/AKfycbzSIFWVRTI79FFgeiAGveHQhEBvZRIMhxJWz3elzIZIO5ZjqyrvnU5zVeMcH_tjCmKFNA/exec', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        registerStatus.style.color = 'green';
        registerStatus.textContent = "Firma u regjistrua me sukses! Zgjidh planin.";
        registerSection.classList.add('hidden');
        subscriptionSection.classList.remove('hidden');
      } else {
        throw new Error('Gabim në regjistrim');
      }
    } catch (err) {
      registerStatus.style.color = 'red';
      registerStatus.textContent = "Dështoi regjistrimi, provo përsëri.";
      console.error(err);
    }
  });

  // Ky pjesë ishte mungesë: lidh butonat me veprimin
  document.querySelectorAll('.planBtn').forEach(btn => {
    btn.addEventListener('click', () => {
      const plan = btn.getAttribute('data-plan');
      const price = btn.getAttribute('data-price');

      subscriptionStatus.style.color = 'green';
      subscriptionStatus.textContent = `Zgjodhe planin ${plan} me çmim $${price}. Faleminderit për abonimin!`;

      // Mund të shtosh integrim me Stripe këtu
      setTimeout(() => {
        window.location.href = 'index.html'; // Kthehu në faqen kryesore
      }, 2000);
    });
  });
});
</script>

</body>
</html>

